-- MySQL Script generated by MySQL Workbench
-- Mon Jun 29 17:13:17 2015
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema b2c
-- -----------------------------------------------------
-- B2C商城

-- -----------------------------------------------------
-- Schema b2c
--
-- B2C商城
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `b2c` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `b2c` ;

-- -----------------------------------------------------
-- Table `b2c`.`group`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `b2c`.`group` (
  `id` TINYINT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '部门id，主键',
  `name` CHAR(10) NOT NULL DEFAULT '' COMMENT '部门名称',
  `pid` TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '父级部门id',
  PRIMARY KEY (`id`))
ENGINE = MyISAM
COMMENT = '部门表';


-- -----------------------------------------------------
-- Table `b2c`.`role`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `b2c`.`role` (
  `id` SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '角色id',
  `name` CHAR(20) NOT NULL DEFAULT '' COMMENT '角色名称',
  `group_id` TINYINT UNSIGNED NOT NULL COMMENT '所属部门id',
  PRIMARY KEY (`id`),
  INDEX `fk_role_group1_idx` (`group_id` ASC))
ENGINE = MyISAM
COMMENT = '角色表';


-- -----------------------------------------------------
-- Table `b2c`.`admin`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `b2c`.`admin` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '主键，管理员id',
  `username` CHAR(10) NOT NULL DEFAULT '' COMMENT '用户名',
  `password` CHAR(32) NOT NULL DEFAULT '' COMMENT '密码',
  `mail` CHAR(30) NOT NULL DEFAULT '' COMMENT '管理员邮箱',
  `real_name` CHAR(20) NOT NULL DEFAULT '' COMMENT '真实姓名',
  `phone` INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '电话',
  `is_lock` TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '账号状态，是否被锁定。 0为正常，1为已锁定',
  `last_login` INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '上次登录时间',
  `group_id` TINYINT UNSIGNED NOT NULL COMMENT '所属部门id',
  `role_id` SMALLINT UNSIGNED NOT NULL COMMENT '所属角色id',
  PRIMARY KEY (`id`),
  INDEX `fk_admin_group1_idx` (`group_id` ASC),
  INDEX `fk_admin_role1_idx` (`role_id` ASC))
ENGINE = MyISAM
COMMENT = '管理员表';


-- -----------------------------------------------------
-- Table `b2c`.`attribute`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `b2c`.`attribute` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '属性id',
  `name` CHAR(20) NOT NULL DEFAULT '' COMMENT '属性名称',
  `value` VARCHAR(255) NOT NULL DEFAULT '' COMMENT '属性值',
  `kind_id` TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '属性类别，1为属性，2为规格',
  `key_char` CHAR(10) NOT NULL DEFAULT '' COMMENT '索引字母',
  PRIMARY KEY (`id`))
ENGINE = MyISAM
COMMENT = '属性表';


-- -----------------------------------------------------
-- Table `b2c`.`actions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `b2c`.`actions` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '动作功能id',
  `action` CHAR(30) NOT NULL DEFAULT '' COMMENT '功能动作名称',
  PRIMARY KEY (`id`))
ENGINE = MyISAM
COMMENT = '系统功能动作表';


-- -----------------------------------------------------
-- Table `b2c`.`group_action`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `b2c`.`group_action` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `group_id` TINYINT UNSIGNED NOT NULL COMMENT '部门id',
  `role_id` SMALLINT UNSIGNED NOT NULL COMMENT '角色id',
  `actions_id` INT UNSIGNED NOT NULL COMMENT '动作权限id',
  PRIMARY KEY (`id`),
  INDEX `fk_group_action_group1_idx` (`group_id` ASC),
  INDEX `fk_group_action_role1_idx` (`role_id` ASC),
  INDEX `fk_group_action_actions1_idx` (`actions_id` ASC))
ENGINE = MyISAM
COMMENT = '权限表，存储部门及角色权限';


-- -----------------------------------------------------
-- Table `b2c`.`category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `b2c`.`category` (
  `id` SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '主键id',
  `cid` INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '分类id',
  `name` CHAR(20) NOT NULL DEFAULT '' COMMENT '分类名称',
  `pid` INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '父级分类id',
  PRIMARY KEY (`id`))
ENGINE = MyISAM
COMMENT = '分类表';


-- -----------------------------------------------------
-- Table `b2c`.`category_attr`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `b2c`.`category_attr` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `category_id` SMALLINT UNSIGNED NOT NULL COMMENT '分类id',
  `attribute_id` INT UNSIGNED NOT NULL COMMENT '属性id',
  `kind_id` TINYINT UNSIGNED NOT NULL COMMENT '属性类别',
  PRIMARY KEY (`id`),
  INDEX `fk_category_attr_category1_idx` (`category_id` ASC),
  INDEX `fk_category_attr_attribute1_idx` (`attribute_id` ASC))
ENGINE = MyISAM;


-- -----------------------------------------------------
-- Table `b2c`.`brand`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `b2c`.`brand` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '主键，品牌id',
  `name` CHAR(20) NOT NULL DEFAULT '' COMMENT '品牌名称',
  `en_name` CHAR(50) NOT NULL DEFAULT '' COMMENT '品牌英文名称',
  `logo` CHAR(30) NOT NULL DEFAULT '' COMMENT '品牌Logo',
  PRIMARY KEY (`id`))
ENGINE = MyISAM;


-- -----------------------------------------------------
-- Table `b2c`.`category_brand`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `b2c`.`category_brand` (
  `id` INT NOT NULL COMMENT '主键',
  `category_id` SMALLINT UNSIGNED NOT NULL COMMENT '分类id',
  `brand_id` INT UNSIGNED NOT NULL COMMENT '品牌id',
  PRIMARY KEY (`id`),
  INDEX `fk_brand_category_category1_idx` (`category_id` ASC),
  INDEX `fk_brand_category_brand1_idx` (`brand_id` ASC))
ENGINE = MyISAM
COMMENT = '分类品牌关联表';


-- -----------------------------------------------------
-- Table `b2c`.`product`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `b2c`.`product` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '主键，商品id',
  `name` VARCHAR(255) NOT NULL DEFAULT '‘’' COMMENT '商品名称',
  `goods` CHAR(30) NOT NULL DEFAULT '' COMMENT '商品货号',
  `manuf_date` INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '生产日期',
  `marked_price` DECIMAL(10,3) UNSIGNED NOT NULL DEFAULT 0 COMMENT '出厂价',
  `add_date` INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '添加日期',
  `brand_id` INT UNSIGNED NOT NULL COMMENT '品牌id',
  `category_id` SMALLINT UNSIGNED NOT NULL COMMENT '所属分类id',
  PRIMARY KEY (`id`),
  INDEX `fk_product_brand1_idx` (`brand_id` ASC),
  INDEX `fk_product_category1_idx` (`category_id` ASC))
ENGINE = MyISAM
COMMENT = '商品主表';


-- -----------------------------------------------------
-- Table `b2c`.`product_details`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `b2c`.`product_details` (
  `small` VARCHAR(255) NOT NULL DEFAULT '' COMMENT '小图',
  `medium` VARCHAR(255) NOT NULL DEFAULT '' COMMENT '中号图',
  `big` VARCHAR(255) NOT NULL DEFAULT '' COMMENT '大图',
  `intro` TEXT NULL COMMENT '商品介绍',
  `product_id` INT UNSIGNED NOT NULL COMMENT '商品id',
  INDEX `fk_product_details_product1_idx` (`product_id` ASC))
ENGINE = MyISAM
COMMENT = '商品详情表';


-- -----------------------------------------------------
-- Table `b2c`.`product_attr`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `b2c`.`product_attr` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `attr_id` INT UNSIGNED NOT NULL DEFAULT 0 COMMENT '属性id',
  `kind_id` TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT '属性类别',
  `product_id` INT UNSIGNED NOT NULL COMMENT '商品id',
  PRIMARY KEY (`id`),
  INDEX `fk_product_attr_product1_idx` (`product_id` ASC))
ENGINE = MyISAM;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
